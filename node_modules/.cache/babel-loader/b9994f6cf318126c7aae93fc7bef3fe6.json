{"remainingRequest":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\src\\components\\UserManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\src\\components\\UserManagement.vue","mtime":1643551754808},{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\babel.config.js","mtime":1640623349839},{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\marko\\IdeaProjects\\formula1_portal_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy9pbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXNlck1hbmFnZW1lbnQnLAogIHByb3BzOiB7CiAgICBtc2c6IFN0cmluZwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlcnMoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyczogW10sCiAgICAgIHVzZXJzRmllbGRzOiBbewogICAgICAgIGtleTogJ2lkJywKICAgICAgICBsYWJlbDogJ0lEJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAndXNlcm5hbWUnLAogICAgICAgIGxhYmVsOiAnVXNlcm5hbWUnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdlbWFpbCcsCiAgICAgICAgbGFiZWw6ICdFbWFpbCcKICAgICAgfV0sCiAgICAgIHNlbGVjdGVkUm9sZXM6IFtdLAogICAgICBvcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAxLAogICAgICAgIHRleHQ6ICdST0xFX1VTRVInCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMiwKICAgICAgICB0ZXh0OiAnUk9MRV9NT0RFUkFUT1InCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMywKICAgICAgICB0ZXh0OiAnUk9MRV9BRE1JTicKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGVhclJvbGVzOiBmdW5jdGlvbiBjbGVhclJvbGVzKCkgewogICAgICB0aGlzLnNlbGVjdGVkUm9sZXMgPSBbXTsKICAgIH0sCiAgICBmaWxsUm9sZXM6IGZ1bmN0aW9uIGZpbGxSb2xlcyhyb2xlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcm9sZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpOwogICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnQubmFtZSk7CgogICAgICAgIF90aGlzLnNlbGVjdGVkUm9sZXMucHVzaChlbGVtZW50LmlkKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0VXNlcnM6IGZ1bmN0aW9uIGdldFVzZXJzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBVUkwgPSAncG9ydGFsL2xpc3RVc2Vycyc7CiAgICAgIHZhciBwcm9taXNlID0gYXhpb3MuZ2V0KFVSTCk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAnMjAwJykgewogICAgICAgICAgX3RoaXMyLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VyczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoJ0FMRVJUJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgYWxlcnQoJ0FMRVJUUicpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVVc2VyUm9sZXM6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJSb2xlcyh1c2VySUQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgVVJMID0gJ3BvcnRhbC91cGRhdGVVc2VyUm9sZXMnOwogICAgICB2YXIgcHJvbWlzZSA9IGF4aW9zLnBvc3QoVVJMLCB7CiAgICAgICAgdXNlcmlkOiB1c2VySUQsCiAgICAgICAgcm9sZXM6IHRoaXMuc2VsZWN0ZWRSb2xlcwogICAgICB9KTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09ICcyMDAnKSB7CiAgICAgICAgICBfdGhpczMuJHJvb3QuJGVtaXQoJ2J2OjpyZWZyZXNoOjp0YWJsZScsICd1c2VyVGFibGUnKTsKCiAgICAgICAgICBfdGhpczMuZ2V0VXNlcnMoKTsKCiAgICAgICAgICBfdGhpczMubWFrZVRvYXN0KCJVc2VyIFJvbGVzIEVkaXRlZCBTdWNjZXNzZnVsbHkiLCAic3VjY2VzcyIsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgMzAwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgnQUxFUlQnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBhbGVydCgnQUxFUlRSJyk7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcm5hbWUpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgVVJMID0gJ3BvcnRhbC9kZWxldGVVc2VyJzsKICAgICAgdmFyIHByb21pc2UgPSBheGlvcy5kZWxldGUoVVJMLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lCiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09ICcyMDAnKSB7CiAgICAgICAgICBfdGhpczQuJHJvb3QuJGVtaXQoJ2J2OjpyZWZyZXNoOjp0YWJsZScsICd1c2VyVGFibGUnKTsKCiAgICAgICAgICBfdGhpczQuZ2V0VXNlcnMoKTsKCiAgICAgICAgICBfdGhpczQubWFrZVRvYXN0KCJVc2VyIERlbGV0ZWQgU3VjY2Vzc2Z1bGx5IiwgInN1Y2Nlc3MiLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UsIDMwMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoJ0FMRVJUJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgYWxlcnQoJ0FMRVJUUicpOwogICAgICB9KTsKICAgIH0sCiAgICBtYWtlVG9hc3Q6IGZ1bmN0aW9uIG1ha2VUb2FzdCh0aXRsZSwgdmFyaWFudCwgY29udGVudCwgZGVsYXkpIHsKICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChjb250ZW50LCB7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLWNlbnRlcicsCiAgICAgICAgdmFyaWFudDogdmFyaWFudCwKICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICAiYXV0by1oaWRlLWRlbGF5IjogZGVsYXkKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["UserManagement.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <b-button class=\"userButtons\" variant=\"outline-success\">Add User</b-button>\r\n\r\n    <div class=\"userTable\">\r\n      <b-table\r\n        no-border-collapse\r\n        small\r\n        head-variant=\"light\"\r\n        responsive\r\n        hover\r\n        primary-key=\"id\"\r\n        :items=\"users\"\r\n        :fields=\"usersFields\"\r\n        ref=\"userTable\"\r\n        id=\"userTable\"\r\n        @row-clicked=\"item=>$set(item, '_showDetails', !item._showDetails)\"\r\n        >\r\n\r\n        <template slot=\"row-details\" slot-scope=\"row\">\r\n          <b-card class=\"userCards\">\r\n            <b-row class=\"mb-2\">\r\n              <b-col sm=\"3\" class=\"text-sm-right\"><b>Roles:</b></b-col>\r\n              <b-col>{{ row.item.roles }}</b-col>\r\n            </b-row>\r\n            <b-button class=\"button\" variant=\"outline-danger\" @click=\"deleteUser(row.item.username)\">Delete User</b-button>\r\n            <b-button v-b-modal.editRoles class=\"button\" variant=\"outline-info\" @click=\"clearRoles();fillRoles(row.item.roles)\">Edit Roles</b-button>\r\n            <b-button class=\"button\" variant=\"outline-info\">Reset Password</b-button>\r\n\r\n            <b-modal id=\"editRoles\" @ok=\"updateUserRoles(row.item.id)\">\r\n              \r\n              <b-form-select v-model=\"selectedRoles\" :options=\"options\" multiple :select-size=\"4\"></b-form-select>\r\n\r\n            </b-modal>\r\n          </b-card>\r\n\r\n        </template>\r\n      </b-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n//import { required } from 'vuelidate/lib/validators'\r\nexport default {\r\n  name: 'UserManagement',\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted (){\r\n    this.getUsers();\r\n  },\r\n  data : function() {\r\n    return {\r\n      users: [],\r\n      usersFields: [\r\n        {key: 'id', label: 'ID', sortable: true},\r\n        {key: 'username', label: 'Username', sortable: true},\r\n        {key: 'email', label: 'Email' }\r\n      ],\r\n      selectedRoles: [],\r\n      options: [\r\n        { value: 1, text: 'ROLE_USER' },\r\n        { value: 2, text: 'ROLE_MODERATOR' },\r\n        { value: 3, text: 'ROLE_ADMIN' },\r\n      ]\r\n    } \r\n  },\r\n  methods: {\r\n    clearRoles(){\r\n      this.selectedRoles = [];\r\n    },\r\n    fillRoles(roles){\r\n      roles.forEach(element =>{\r\n        console.log(element);\r\n        console.log(element.name);\r\n        this.selectedRoles.push(element.id)\r\n      });\r\n\r\n    },\r\n    getUsers() {\r\n      let URL = 'portal/listUsers';\r\n      let promise = axios.get(URL)\r\n      return promise.then((response) => {\r\n          if(response.status == '200'){\r\n            this.users = response.data.users\r\n          }else{\r\n            alert('ALERT');\r\n          }\r\n\r\n        },\r\n        ).catch(err => {\r\n          alert('ALERTR');\r\n        })\r\n    },\r\n    updateUserRoles(userID) {\r\n      let URL = 'portal/updateUserRoles';\r\n      let promise = axios.post(URL,{\r\n        userid: userID,\r\n        roles: this.selectedRoles\r\n      })\r\n      return promise.then((response) => {\r\n          if(response.status == '200'){\r\n            this.$root.$emit('bv::refresh::table', 'userTable');\r\n            this.getUsers();\r\n            this.makeToast(\"User Roles Edited Successfully\", \"success\", response.data.message, 30000);\r\n          }else{\r\n            alert('ALERT');\r\n          }\r\n\r\n        },\r\n        ).catch(err => {\r\n          alert('ALERTR');\r\n        })\r\n    },\r\n    deleteUser(username) {\r\n      let URL = 'portal/deleteUser';\r\n      let promise = axios.delete(URL,{\r\n        data: {\r\n          username: username\r\n        }\r\n      })\r\n\r\n      return promise.then((response) => {\r\n          if(response.status == '200'){\r\n            this.$root.$emit('bv::refresh::table', 'userTable');\r\n            this.getUsers();\r\n            this.makeToast(\"User Deleted Successfully\", \"success\", response.data.message, 30000);\r\n          }else{\r\n            alert('ALERT');\r\n          }\r\n\r\n        },\r\n        ).catch(err => {\r\n          alert('ALERTR');\r\n        })\r\n    },\r\n    makeToast(title, variant, content, delay) {\r\n      this.$bvToast.toast(content, {\r\n          title: title,\r\n          toaster: 'b-toaster-top-center',\r\n          variant: variant,\r\n          solid: true,\r\n          \"auto-hide-delay\": delay\r\n      })\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style >\r\n  .userButtons{\r\n    margin-top: 1%;\r\n    margin-bottom: 1%;\r\n    width: 97%;\r\n  }\r\n  .button{\r\n    width: 20%;\r\n    float: right;\r\n  }\r\n  .userTable{\r\n    margin: 0 auto;\r\n    width: 97%;\r\n  }\r\n  .userCards {\r\n    border: none;\r\n  }\r\n  .table-hover tbody tr:hover td, .table-hover tbody tr:hover th {\r\n    background-color: #d7faf9;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/components"}]}